<!doctype html>
<html>
<head><meta charset="utf-8"><title></title><link rel="stylesheet" href="../../help.css"></head>
<body><h2><a name="File_Check_and_Variant"></a>File Check and Variant</h2><p><tt>⎕FCHK</tt>, which was implemented before the Variant operator was introduced, has been changed to support the use of Variant to set options. This has been done for consistency. However,  the existing method for setting the options via its left argument will continue to be supported. There are 3 options:</p><ul><li value="1">Task</li><li value="2">Repair</li><li value="3">Force</li></ul><p><span class="Name">Rebuild</span> causes the <span class="Italic">file indices</span> to be discarded and rebuilt. <span class="Name">Repair</span> only takes place on files which have been checked and found to be damaged. It involves a rebuild, but that only takes place if it is needed. Note that Repair and Force only apply if Task is <tt>'Scan'</tt>.</p><h4>Task</h4><table><tr><td class="DyalogDefault">Scan</td><td>causes the file to be checked and optionally repaired (see <tt>'Repair'</tt> below) 	</td></tr><tr><td><tt>Rebuild</tt></td><td> causes the file to be unconditionally rebuilt </td></tr></table><h4>Repair (principle option)</h4><table><tr><td class="DyalogDefault">0</td><td>do not repair</td></tr><tr><td><tt>1</tt></td><td>causes the file to be repaired if damage is found</td></tr></table><h4>Force</h4><table><tr><td class="DyalogDefault">0</td><td>do not validate the file if it appears to have been properly closed</td></tr><tr><td><tt>1</tt></td><td>validate the file even if it appears to have been properly closed</td></tr></table><p> Default values are highlighted <span class="DefaultOption">thus</span> in the above tables.</p><h4>Examples</h4><p>To check a file and attempt to fix it if damage is found:</p><pre>      (⎕FCHK ⍠ 1)'suspect.dcf'</pre><p>To forcibly check a file and attempt to fix it if damage is found:</p><pre>      (⎕FCHK ⍠ ('Repair' 1)('Force'1))'suspect.dcf'</pre><p>Note that if options are specified using both the Variant operator and a left argument, the left argument overrides Variant. For example:</p><pre>      MYFCHK ← ⎕FCHK ⍠ 'Task' 'Scan' ⍠ 'Repair' 0</pre><p>names a variant of <tt>⎕FCHK</tt> (identical, in this example, to the default) which can still be overridden by a left argument. </p><pre>      'rebuild' MYFCHK 'myfile'</pre><script src="../../help.js"></script></body>
</html>