<!doctype html>
<html>
<head><meta charset="utf-8"><title></title><link rel="stylesheet" href="../../../help.css"></head>
<body><h2><tt>Event 94</tt>ServiceNotification</h2><table class="GUIMembers"><tr><td class="SpacedPlainTitle">Applies To:</td><td class="SpacedPlain"><a href="../objects/root.html">Root</a></td></tr></table><p class="Bold">Description</p><p>This event is generated in an APL service whenever the Windows Service Control Manager (SCM) requests a change of state. See  <a href="../../userguide/installation-and-configuration/apl-application-as-a-service.html#A4S" class="MCXref_0">APL Application as a Service</a>.</p><p>The event message reported as the result of <a href="../../lang/sysfns/dq.html"><tt>⎕DQ</tt></a>, or supplied as the right argument to your callback function, is a 4-element vector as follows :</p><table class="Event"><tr><td><tt>[1]</tt></td><td>Object</td><td>ref or character vector</td></tr><tr><td><tt>[2]</tt></td><td>Event</td><td><tt>'ServiceNotification'</tt> or 94</td></tr><tr><td><tt>[3]</tt></td><td>Action</td><td>Integer. </td></tr><tr><td><tt>[4]</tt></td><td>State</td><td>7-element integer vector</td></tr></table><p>For further details, see the on-line documentation for <span class="Code">SERVICE_STATE</span> and the function <tt>HashDefine</tt> in the sample workspace <span class="Code">samples\aplservice\aplservice.dws</span>.</p><p>The state of a Windows service is determined by the user and the Windows Service Control Manager (SCM).</p><p>When the SCM requests a change of state, the APL interpreter responds by setting its state to the corresponding <span class="Name">pending</span> level (SERVICE_STOPPED_PENDING, SERVICE_RUNNING_PENDING or SERVICE_PAUSED_PENDING) and then generates a <a href="#">ServiceNotification</a> event.</p><p> It is the responsibility of the APL service to process this event, perform the appropriate application tasks, and then respond (to the SCM) by calling the <a href="setservicestate.html">SetServiceState</a> method to confirm that the service has reached the desired state.</p></body>
</html>