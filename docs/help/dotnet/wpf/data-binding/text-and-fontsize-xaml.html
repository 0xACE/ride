<!doctype html>
<html>
<head><meta charset="utf-8"><title></title><link rel="stylesheet" href="../../../../help.css"></head>
<body><h4>Example 4</h4><p>This example uses XAML to specify the user-interface and the main components of the data binding. </p><h4>The XAML</h4><p>The XAML is much the same as in Example 1 and 2 except that it connects two properties <span class="Member">Text</span> and <span class="Member">FontSize</span> of the same <span class="NetType">TextBox</span> to two Paths <span class="Name">txtSource</span> and <span class="Name">sizeSource</span>. </p><pre class="Code">&lt;Window
 xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
 xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
 Name="Temp"
 Title="Data Binding (Text and FontSize)"
 SizeToContent="WidthandHeight"&gt;
     &lt;TextBox Name="txt" Width="350" Margin="5"
      Text="{Binding txtSource,Mode=TwoWay,
             UpdateSourceTrigger=PropertyChanged}"
      FontSize="{Binding sizeSource,Mode=OneWay}"/&gt;
&lt;/Window&gt;
</pre><h4 class="ExampleNewPage">The APL Code</h4><p>The function <tt>TextFontSize</tt> is shown below. </p><pre>     ∇ TextFontSize(txt size);⎕USING;str;xml;win;options
[1]    ⎕USING←'System'
[2]    ⎕USING,←⊂'System.Windows,WPF/PresentationFramework.dll'
[3]
[4]    win←LoadXAML XAML
[5]
[6]    src←⎕NS''
[7]    src.(txtSource sizeSource)←txt size
[8]    options←2 2⍴'txtSource'String'sizeSource'Int32
[9]
[10]   win.DataContext←options(2015⌶)'src'
[11]
[12]   win.Show
     ∇
</pre><p>Lines [6-7] create a new namespace <span class="DataType">src</span> containg two variables <tt>txtSource</tt> and <tt>sizeSource</tt> which are initialised to the arguments of the function.</p><pre>
[6]    src←⎕NS''
[7]    src.(txtSource sizeSource)←txt size</pre><p>Line [8] creates a local variable named options which will be used as the left argument of  <tt>2015⌶)</tt>. It is a 2-column matrix. The first column is a list of the names of the variables which are to be exported by the namespace when used as a Binding Source. The second column specifies their data types.</p><pre>
[8]    options←2 2⍴'txtSource'String'sizeSource'Int32</pre><p>Line [10] creates a Binding Source object from the namespace <tt>src</tt> and a left argument <tt>options</tt> and assigns it to the <span class="Member">DataContext</span> property of the <span class="NetType">Window</span><tt> win</tt>.</p><pre>
[10]   win.DataContext←options(2015⌶)'src'</pre><p>An alternative would be to assign it to the <span class="Member">DataContext</span> property of the <span class="NetType">TextBox</span> object, but this would require one further line of code to identify it. The reason this works is that the DataContext property of a <span class="NetType">TextBox</span> (and many other controls) is inherited from its parent Window. This feature allows a single Binding Source namespace to be used to specify data bindings between its component variables and any number of properties of any number of controls in the same Window.</p><p>As shown before, the left argument of <tt>2015⌶)</tt> is optional. Without it, the namespace would export all its variables using default binding types. In this case, because the binding type of <tt>sizeSource</tt> must be specifed as <span class="NetType">Int32</span>, it is necessary to use a left argument, which means specifying all the variables involved.</p><h4>Testing the Data Binding</h4><pre>      )LOAD WPFIntro
      )CS DataBinding.TextFontSizeXAML</pre><pre>      DB_Text_FontSize_XAML'Hello World' 30</pre><p><img src="../../images/data-binding-text-fontsize-1.png"></p><pre>      src.(txtSource sizeSource←(⌽txtSource) 18)</pre><p><img src="../../images/data-binding-text-fontsize-2.png"></p><p>As in previous examples, when the user changes the text, the new text appears in <tt>txtSource</tt>.</p><p><img src="../../images/data-binding-text-fontsize-3.png"></p><pre>      src.txtSource
Learn to play the bouzouki!
</pre><script src="../../../../help.js"></script></body>
</html>