<!doctype html>
<html>
<head><meta charset="utf-8"><title></title><link rel="stylesheet" href="../../../help.css"></head>
<body><h2><a name="Introduction"></a>Introduction</h2><p>This chapter describes the use of TCPSocket objects to access the internet. From Version 12.0, a new tool called Conga is the recommended mechanism for connecting to the internet. The code samples in this chapter have not been ported to the Unicode Edition, but continue to work in Classic Editions. For information on accessing the internet and other TCP services in the Unicode Edition, see the <span class="Italic">Conga User Guide</span>.</p><p>A complete description of how Web browsers and servers work is beyond the scope of this document.  Nevertheless, the following basic introduction should prove a useful introduction before trying to write a server or client application in Dyalog APL.</p><p>A Web server is simply a TCP/IP server that adheres to a particular protocol known as Hypertext Transfer Protocol (HTTP). Every request for a document from a Web browser to a Web server is a new connection. When a Web browser requests an HTML document from a Web server, the connection is opened, the document transferred, and the connection closed.</p><p>The Web server advertises its availability by opening a Stream socket.  Conventionally, it uses Port Number 80 although other port numbers may be used if and when required.</p><p>A client (normally referred to as a <span class="Italic">browser</span>) connects to a server and immediately sends it a <span class="Italic">command</span>.  A command is a text string containing sub-strings separated by CR,LF pairs and terminated by CR,LF (an empty line). This terminator is an <b>essential</b> part of the protocol as it notifies the server that the entire command has been received. An example of a command sent by Netscape Navigator 3.0 Gold is:</p><pre class="Code">    GET / HTTP/1.0&lt;CR,LF&gt;
    Proxy-Connection: Keep-Alive&lt;CR,LF&gt;
    User-Agent: Mozilla/3.0Gold (Win95; I) &lt;CR,LF&gt;
    Host: pete.dyalog.com&lt;CR,LF&gt;
    Accept: image/gif, image/x-xbitmap, image/jpeg,
                       image/pjpeg, */*&lt;CR,LF&gt;
    &lt;CR,LF&gt;</pre><p>The first line of the command is a statement that tells the server what the client wants. The simplest statement is of the form GET &lt;url&gt;, which instructs the server to retrieve a particular document. In the example, &lt;url&gt; is "/" which is a relative Universal Resource Locator (URL) that identifies the home page of the current server. The client may also specify the level of http protocol that it understands as a second parameter. In the above example, the client is requesting HTTP version 1.0. Subsequent statements provide other information that may be useful to the server.</p><p>The server receives the command, actions it, and then sends back the result; in this case, the content of the Web page associated with the given URL. Using the original HTTP version 1.0 protocol, the server then <b>closes</b> the TCP/IP socket. This act informs the client that all of the data has been received and that the entire transaction is complete.</p><p>Today's web servers commonly use HTTP 1.1 which supports persistent connections. This means that the socket may not be closed, but is instead  left open (for a time) for potential re-use. This behaviour is specified by <span class="Italic">Connection: Keep-Alive HTTP headers</span> which are beyond the scope of this discussion.  However, to support persistent connections, even the simplest client must be able to detect that the transaction is complete in some other way. A simple solution, as implemented in the <tt>BROWSER.QUERY</tt> function, is to look for the HTML end-tag.</p><p>The protocol can therefore be summarised as:</p><ol style="list-style-type: lower-alpha;"><li value="1">Client connects to server</li><li value="2">Client sends command (terminated by CR,LF)</li><li value="3">Server sends requested data to client</li><li value="4">Server disconnects from client (HTTP 1.0 only)</li></ol><p>A Web page normally contains text and embedded hyperlinks which connect it to other WWW pages. When the user activates a hyperlink, the browser connects to the corresponding server and requests the relative URL.</p><p>However, if you are using a secure proxy server, as most corporate users do, the browser connects repeatedly to your proxy (rather than to specific servers) and requests the <span class="Italic">absolute</span> URL (which contains the name of the server) instead.</p></body>
</html>