<!doctype html>
<html>
<head><meta charset="utf-8"><title></title><link rel="stylesheet" href="../../../help.css"></head>
<body><h2><a name="Picture_Buttons"></a>Picture Buttons</h2><p>Picture buttons in <span class="Italic">toolbars</span> are most conveniently represented by ToolButtons in ToolControls (see Chapter 4). Pictures on stand-alone buttons or buttons used in the (superseded) ToolBar object, may be created using Bitmap, Icon and Metafile objects and there are two different methods provided. The first (and the simplest) is to use the Picture property which applies to all 3 types of image,(Bitmap, Icon or Metafile). The second method is to use the BtnPix property. This requires rather more effort, and only draws Bitmaps, and not Icons or Metafiles. However, the BtnPix property gives you total control over the appearance of a Button which the Picture property does not.</p><h4><a name="Using_Picture"></a>Using the Picture Property</h4><p>The Picture property overlays a Bitmap, Icon or Metafile on top of a standard pushbutton. The following example uses an icon which is included with Dyalog APL.</p><pre>      dyalog←2 ⎕NQ'.' 'GetEnvironment' 'dyalog'
      'spider'⎕WC'Icon'(dyalog,'ws\arachnid.ico')
      'F'⎕WC'Form' 'Using the Picture Property'
      'F.B'⎕WC'Button'('Coord' 'Pixel')('Size' 40 40)
      F.B.Picture←spider 3</pre><p><img src="../images/spider-button.png" /></p><p>Notice that (by definition) an icon is 32 x 32 pixels in size. To allow space for the pushbutton borders you have to make the Button at least 40 x 40 pixels. The "3" means put the <tt>'spider'</tt> in the <b>centre</b> of the button.</p><p>When you press a Button which has its Picture property set like this, APL automatically shifts the overlaid image down and to the right by 1 pixel. This complements the change in appearance of the button borders and achieves a "pressed-in" look. When you release the button, APL shifts the image back again.</p><p>The Picture property therefore provides a very simple mechanism for implementing a "tool-button", especially if you already have a bitmap or icon file that you want to use.</p><p>However, the Picture property has certain limitations. Firstly, you cannot alter the "pressed-in" look of the Button which is determined automatically for you. You might want the Button to change colour when you press it, and you cannot achieve this with the Picture property. Secondly, the appearance of the Button is unchanged when you make it inactive (by setting its Active property to 0).</p><p>Note that if you use the Picture property on Radio or Check buttons, the buttons assume pushbutton appearance although their radio/check behaviour is unaffected.</p><h4><a name="Using_BTNPix"></a>Using the BtnPix Property</h4><p>You can obtain <b>complete</b> control over the appearance of a Button by using the BtnPix property; however this entails more work on your part.</p><p>BtnPix allows you to associate three bitmaps with a Button, i.e.</p><ul><li value="1">one for when the Button is in its normal state</li><li value="2">one for when it is pressed/selected</li><li value="3">one for when it is inactive</li></ul><p>For example, if you have created three Bitmap objects called <tt>UP</tt>, <tt>DOWN</tt> and <tt>DEAD</tt>, you define the Button as follows:</p><pre>      'F.B' ⎕WC 'Button' ('BtnPix' UP DOWN DEAD)</pre><p>APL subsequently displays one of the three Bitmap objects according to the state of the Button; i.e. <tt>UP</tt> for its normal state (State 0), <tt>DOWN</tt> for its pressed/selected state (State 1) or <tt>DEAD</tt> when it is inactive (Active 0).</p><p>The BtnPix property requires that you use Bitmap objects; it doesn't work for Icons. This is because icons are normally at least partly <b>transparent</b>. However, it is very easy to convert an icon file to a Bitmap object. First you create an Icon object from the icon (.ICO) file. Next you read the icon's pattern definition (Bits property) and colour map (CMap property) into the workspace. Then finally, you create a Bitmap from these two arrays.</p><p>The following example illustrates how you can make a Button from  icons supplied with Windows. </p><p>Load a closed folder icon:</p><pre>      'T1'⎕WC'Icon'('Shell32.dll' ¯3)</pre><p>Read its Bits (pattern) and CMap (colour map):</p><pre>      Bits CMap ← 'T1' ⎕WG 'Bits' 'CMap'</pre><p>Now define a Bitmap from these variables, (replacing the <tt>T1</tt> object):</p><pre>      'T1' ⎕WC 'Bitmap' '' Bits CMap</pre><p>Now make a second Bitmap:</p><pre>      'T2'⎕WC'Icon'('Shell32.dll' ¯4)
      'T2'⎕WC'Bitmap' '','T2'⎕WG'Bits' 'CMap'</pre><p>Now define the Button. Notice that the third (inactive) bitmap is optional.</p><pre>      'F.B' ⎕WC 'Button' ('BtnPix' 'T1' 'T2')</pre><p>The pictures below show the button in its <span class="Italic">normal</span> and <span class="Italic">pressed</span> states.</p><table style="width: 11.6cm;"><tbody><tr><td><img src="../images/btnpix-1.png" /></td><td><img src="../images/btnpix-2.png" /></td></tr></tbody></table></body>
</html>