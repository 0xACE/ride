<!doctype html>
<html>
<head><meta charset="utf-8"><title></title><link rel="stylesheet" href="../../../help.css"></head>
<body><h2><a name="Threads_Tool"></a>The Threads Tool</h2><p>The Threads Tool is used to monitor and debug multi-threaded applications. To display the Threads Tool, select <span class="Name">Show Threads Tool</span> from the <span class="Name">Session Threads</span> menu, or <span class="Name">Threads</span> from the Session pop-up menu.</p><p><img src="../images/threads-tool.png" /></p><p>The above picture illustrates a situation using the LIFT.DWS workspace after executing the function <tt>RUN</tt>. The <span class="Name">Pause on Error</span> option was enabled and a Stop was set on <tt>RUN[63]</tt>. When <tt>RUN</tt> suspended at this point, all other threads (1-8) were automatically Paused. Note that all other threads happen to be Paused in the middle of calls to system functions </p><p>The columns of the Threads Tool display the following information.</p><table><tr><th class="Left">Column</th><th class="Left">Description</th></tr><tr><td class="RowTitle">Tid</td><td>The Thread ID (<tt>⎕TID</tt>) and name (<tt>⎕TNAME</tt>) if set</td></tr><tr><td class="RowTitle">Location</td><td>The currently executing line of function code</td></tr><tr><td class="RowTitle">State</td><td>Indicates what the thread is doing. (see below)</td></tr><tr><td class="RowTitle">Flags</td><td>Normal or Paused.</td></tr><tr><td class="RowTitle">Treq</td><td>The Thread Requirements (<tt>⎕TREQ</tt>) </td></tr></table><h4><a name="_Toc289335817"></a>Thread States</h4><table><tr><th class="Left">State</th><th class="Left">Description</th></tr><tr><td>Pending</td><td>Not yet running</td></tr><tr><td>Initializing</td><td>Not yet running</td></tr><tr><td>Defined function</td><td>Between lines of a defined function</td></tr><tr><td>Dynamic function</td><td>Between lines of a dynamic function</td></tr><tr><td>Suspended</td><td>Indicates that the thread is suspended and is able to accept input from the Session window.</td></tr><tr><td>Session</td><td>Indicates that Session window is connected to this thread. </td></tr><tr><td>(no stack)</td><td>Indicates that the thread has no SI stack and the Session is connected to another thread. This state can only occur for Thread 0.</td></tr><tr><td>Exiting</td><td>About to be terminated</td></tr><tr><td><tt>:Hold</tt></td><td>Waiting for a <tt>:Hold </tt>token</td></tr><tr><td><tt>:EndHold</tt></td><td>Waiting for a <tt>:Hold</tt> token</td></tr><tr><td><tt>⎕DL</tt></td><td>Executing <tt>⎕DL</tt></td></tr><tr><td><tt>⎕DQ</tt></td><td>Executing <tt>⎕DQ</tt></td></tr><tr><td><tt>⎕NA</tt></td><td>Waiting for a DLL <tt>(⎕NA</tt>) call to return.</td></tr><tr><td><tt>⎕TGET</tt></td><td>Executing <tt>⎕TGET</tt>, waiting for a token</td></tr><tr><td><tt>⎕TGET</tt><br />(Ready to continue)</td><td>Executing <tt>⎕TGET</tt>, having got a token </td></tr><tr><td><tt>⎕TSYNC</tt></td><td>Waiting for another thread to terminate</td></tr><tr><td>Awaiting request</td><td>Indicates a thread that is associated with a .NET system thread, but is currently unused</td></tr><tr><td>Called .Net</td><td>Waiting for a call to .NET to return.</td></tr></table><h4><a name="_Toc289335818"></a>Paused/Normal</h4><p>In addition to the thread state as described above, a thread may be <span class="Name">Paused</span> or <span class="Name">Normal</span> as shown in the <span class="Name">Flags</span> column. A <span class="Name">Paused</span> thread is one that has temporarily been removed from the list of threads that are being scheduled by the thread scheduler. A <span class="Name">Paused</span> thread is effectively frozen.</p><h4><a name="_Toc289335819"></a>Threads Tool Pop-Up Menu</h4><p><img src="../images/threads-tool-menu.png" /></p><table><tr><td class="RowTitle">Switch to</td><td>Selecting this item causes APL to attempt to suspend (if necessary) and switch to the selected thread, connecting it to the Session and Debugger windows. </td></tr><tr><td class="RowTitle">Refresh Now</td><td>Refreshes the <span class="Name">Threads Tool</span> display to show the current position and state of each thread.</td></tr><tr><td class="RowTitle">Auto Refresh</td><td>Selecting this item causes the <span class="Name">Threads Tool</span> to be updated continuously, so that it shows the latest position and state of each thread.</td></tr><tr><td class="RowTitle">Pause Threads on Error</td><td>If this item is checked, APL automatically Pauses all other threads when a thread suspends due to an error or an interrupt.</td></tr><tr><td class="RowTitle">Paused</td><td>This item toggles a thread between being <span class="Name">Paused</span> and <span class="Name">Normal</span>. It Pauses a <span class="Name">Normal</span> thread and resumes a <span class="Name">Paused</span> thread.</td></tr><tr><td class="RowTitle">Pause All</td><td>This item causes all threads to be <span class="Name">Paused</span>.</td></tr><tr><td class="RowTitle">Resume All</td><td>This item resumes all threads.</td></tr><tr><td class="RowTitle">Restart All</td><td>This item resumes all <span class="Name">Paused</span> threads, restarts all suspended threads, and closes the Debugger.</td></tr></table></body>
</html>