<!doctype html>
<html>
<head><meta charset="utf-8"><title></title><link rel="stylesheet" href="../../../../help.css"></head>
<body><h3>GolfService Example</h3><p>The <a href="golfservice-example-class.html">GolfService Example Class</a> illustrates the use of nested classes. <a href="golfservice-example-class.html">GolfService</a> was originally developed as a Web Service for Dyalog.Net and is one of the samples distributed in samples\asp.net\webservices. This version has been reconstructed as a stand-alone APL Class.</p><p><a href="golfservice-example-class.html">GolfService</a> contains the following nested classes, all of which are <tt>Private</tt>.</p><table><tr><td><span class="MCPopup"><a href="javascript:void(0);" onclick="FMCPopup( event, this ); return false;" class="MCPopupSpot">GolfCourse</a></span></td><td>A Class that represents a Golf Course, having Fields <tt>Code</tt> and <tt>Name</tt>.</td></tr><tr><td><span class="MCPopup"><a href="javascript:void(0);" onclick="FMCPopup( event, this ); return false;" class="MCPopupSpot">Slot</a></span></td><td>A Class that represents a tee-time or match, having Fields <tt>Time</tt> and <tt>Players</tt>. Up to 4 players may play together in a match.</td></tr><tr><td><span class="MCPopup"><a href="javascript:void(0);" onclick="FMCPopup( event, this ); return false;" class="MCPopupSpot">Booking</a></span></td><td>A Class that represents a reservation for a particular tee-time at a particular golf course. This has Fields <tt>OK</tt>, <tt>Course</tt>, <tt>TeeTime</tt> and <tt>Message</tt>. The value of <tt>TeeTime</tt> is an Instance of a Slot Class.</td></tr><tr><td><span class="MCPopup"><a href="javascript:void(0);" onclick="FMCPopup( event, this ); return false;" class="MCPopupSpot">StartingSheet</a></span></td><td>A Class that represents a day's starting-sheet at a particular golf course. It has Fields <tt>OK</tt>, <tt>Course</tt>, <tt>Date</tt>, <tt>Slots</tt>, <tt>Message</tt>. <tt>Slots</tt> is an array of Instances of Slot Class.</td></tr></table><p>The <a href="golfservice-example-class.html">GolfService</a> constructor takes the name of a file in which all the data is stored. This file is initialised by method <tt>InitFile</tt> if it doesn't already exist.</p><pre>      G←⎕NEW GolfService 'F:\HELP11.0\GOLFDATA'
      G
#.[Instance of GolfService]</pre><p>The <span class="MCPopup"><a href="javascript:void(0);" onclick="FMCPopup( event, this ); return false;" class="MCPopupSpot">GetCourses</a></span> method returns an array of Instances of the internal (nested) Class <span class="MCPopup"><a href="javascript:void(0);" onclick="FMCPopup( event, this ); return false;" class="MCPopupSpot">GolfCourse</a></span>. Notice how the display form of each Instance is established by the <span class="MCPopup"><a href="javascript:void(0);" onclick="FMCPopup( event, this ); return false;" class="MCPopupSpot">GolfCourse</a></span> constructor, to obtain the output display shown below.</p><pre>      G.GetCourses
 St Andrews(1)  Hindhead(2)  Basingstoke(3) </pre><p>All of the dates and times employ instances of the .Net type System.DateTime, and the following statements just set up some temporary variables for convenience later.</p><pre>      ⎕←Tomorrow←(⎕NEW DateTime(3↑⎕TS)).AddDays 1
31/03/2006 00:00:00
      ⎕←TomorrowAt7←Tomorrow.AddHours 7
31/03/2006 07:00:00</pre><p>The <span class="MCPopup"><a href="javascript:void(0);" onclick="FMCPopup( event, this ); return false;" class="MCPopupSpot">MakeBooking</a></span> method takes between 4 and 7 parameters viz.</p><ul><li value="1">the code for the golf course at which the reservation is required</li><li value="2">the date and time of the reservation</li><li value="3">a flag to indicate whether or not the nearest available time will do</li><li value="4">a list of up to 4 players who wish to book that time.</li></ul><p>The result is an Instance of the internal Class <span class="MCPopup"><a href="javascript:void(0);" onclick="FMCPopup( event, this ); return false;" class="MCPopupSpot">Booking</a></span>. Once again, <tt>⎕DF</tt> is used to make the default display of these Instances meaningful. In this case, the reservation is successful.</p><pre>      G.MakeBooking 2 TomorrowAt7 1 'Pete' 'Tiger'
<span> </span> Hindhead(2)   31/03/2006 07:00:00   Pete  Tiger    OK </pre><p>Bob, Arnie and Jack also ask to play at 7:00 but are given the 7:10 tee-time instead (4-player restriction).</p><pre>      G.MakeBooking 2 TomorrowAt7 1 'Bob' 'Arnie' 'Jack'
 Hindhead(2)   31/03/2006 07:10:00   Bob  Arnie  Jack    OK </pre><p>However, Pete and Tiger are joined at 7:00 by Dave and Al.</p><pre>       G.MakeBooking 2 TomorrowAt7 1 'Dave' 'Al'
<span> </span> Hindhead(2)   31/03/2006 07:00:00   Pete  Tiger  Dave  Al    OK </pre><p>Up to now, all bookings have been made with the tee-time flexibility flag set to 1. Inflexible Jim is only interested in playing at 7:00...</p><pre>      G.MakeBooking 2 TomorrowAt7 0 'Jim'
 Hindhead(2)  31/03/2006 07:00:00  Not available </pre><p>... so his reservation fails (4-player restriction). </p><p>Finally the <span class="MCPopup"><a href="javascript:void(0);" onclick="FMCPopup( event, this ); return false;" class="MCPopupSpot">GetStartingSheet</a></span> method is used to obtain an Instance of the internal Class <span class="MCPopup"><a href="javascript:void(0);" onclick="FMCPopup( event, this ); return false;" class="MCPopupSpot">StartingSheet</a></span> for the given course and day.</p><pre>      G.GetStartingSheet 2 Tomorrow
  Hindhead(2)  31/03/2006 00:00:00              
  31/03/2006 07:00:00   Pete  Tiger  Dave  Al   
  31/03/2006 07:10:00   Bob  Arnie  Jack        
  31/03/2006 07:20:00                           
  ....</pre><script src="../../../../help.js"></script></body>
</html>