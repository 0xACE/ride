<!doctype html>
<html>
<head><meta charset="utf-8"><title></title><link rel="stylesheet" href="../../../../help.css"></head>
<body><h3>Base Constructors</h3><p>Constructors in a Class hierarchy are not inherited in the same way as other members. However, there is a mechanism for all the Classes in the Class inheritance tree to participate in the initialisation of an Instance.</p><p>Every Constructor function contains a<tt>:Implements Constructor</tt> statement which may appear anywhere in the function body. The statement may optionally be followed by the <tt>:Base</tt> control word and an arbitrary expression.</p><p>The statement:</p><pre>      :Implements Constructor :Base expr</pre><p>calls <span class="Italic">a monadic</span> Constructor in the Base Class. The choice of Constructor depends upon the rank and shape of the result of <tt>expr</tt> (see <a href="constructor-overloading.html" class="MCXref_0">Constructor Overloading</a> for details).</p><p>Whereas, the statement:</p><pre>      :Implements Constructor</pre><p>or</p><pre>      :Implements Constructor :Base</pre><p>calls <span class="Italic">the niladic</span> Constructor in the Base Class.</p><p>Note that during the instantiation of an Instance, these calls potentially take place in every Class in the Class hierarchy.</p><p>If, anywhere down the hierarchy, there is a <span class="Italic">monadic</span> call and there is no matching monadic Constructor, the operation fails with a <tt>LENGTH ERROR</tt>.</p><p>If there is a <span class="Italic">niladic</span> call on a Class that defines <b>no Constructors</b>, the niladic call is simply repeated in the next Class along the hierarchy.</p><p>However, if a Class defines a monadic Constructor and no niladic Constructor it implies that that Class <b>cannot be instantiated without Constructor arguments</b>. Therefore, if there is a call to a niladic Constructor in such a Class, the operation fails with a <tt>LENGTH ERROR</tt>. Note that it is therefore impossible for APL to instantiate a <a href="../../intro/variables/prototypes-and-fill-items.html">fill item</a> or process a reference to an <a href="empty-arrays-of-instances-how.html">empty array</a> for such a Class or any Class that is based upon it.</p><p>A Constructor function may not call another Constructor function and a constructor function may not be called directly from outside the Class or Instance. The only way a Constructor function may be invoked is by <tt>⎕NEW</tt>. The fundamental reason for these restrictions is that there must be one and only one call on the Base Constructor when a new Instance is instantiated. If Constructor functions were allowed to call one another, there would be several calls on the Base Constructor. Similarly, if a Constructor could be called directly it would potentially duplicate the Base Constructor call.</p></body>
</html>