<!doctype html>
<html>
<head><meta charset="utf-8"><title></title><link rel="stylesheet" href="../../../../help.css"></head>
<body><h3><a name="EmptyArraysOfInstances"></a>Empty Arrays of Instances: Why ?</h3><p>In APL it is natural to use <span class="Italic">arrays </span>of Instances. For example, consider the following example.</p><pre>:Class Cheese
    :Field Public Name←''
    :Field Public Strength←⍬
    ∇ make2(name strength)
      :Access Public
      :Implements Constructor
      Name Strength←name strength
    ∇
    ∇ make1 name
      :Access Public
      :Implements Constructor
      Name Strength←name 1
    ∇
    ∇ make_excuse
      :Access Public
      :Implements Constructor
      ⎕←'The cat ate the last one!'
    ∇
:EndClass</pre><p>We might create an array of Instances of the Cheese Class as follows:</p><pre>      cdata←('Camembert' 5)('Caephilly' 2) 'Mild Cheddar'
      cheeses←{⎕NEW Cheese ⍵}¨cdata</pre><p>Suppose we want a range of medium-strength cheese for our cheese board.</p><pre>      board←(cheeses.Strength&lt;3)/cheeses
      board.Name
 Caephilly  Mild Cheddar </pre><p>But look what happens when we try to select really strong cheese:</p><pre>      board←(cheeses.Strength&gt;5)/cheeses
      board.Name
The cat ate the last one!</pre><p>Note that this message is not the result of the expression, but was explicitly displayed by the <tt>make_excuse</tt> function. The clue to this behaviour is the shape of <tt>board</tt>; it is empty!</p><pre>      ⍴board
0</pre><p>When a reference is made to an empty array of Instances (strictly speaking, a reference that requires a <span class="Italic">prototype</span>), APL creates a new Instance by calling the <span class="Italic">niladic</span> (default) Constructor, uses the new Instance to satisfy the reference, and then discards it. Hence, in this example, the reference:</p><pre>      board.Name</pre><p>caused APL to run the <span class="Italic">niladic</span> Constructor <tt>make_excuse</tt>, which displayed:</p><pre>The cat ate the last one!</pre><p>Notice that the behaviour of empty arrays of Instances is modelled VERY closely after the behaviour of empty arrays in general. In particular, the Class designer is given the task of deciding what the types of the members of the prototype are.</p><p>The full explanation is given in the <a href="empty-arrays-of-instances-how.html">next topic</a>.</p><script src="../../../../help.js"></script></body>
</html>