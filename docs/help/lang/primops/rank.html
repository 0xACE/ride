<!doctype html>
<html>
<head><meta charset="utf-8"><title></title><link rel="stylesheet" href="../../../help.css"></head>
<body><h2><tt>R←{X}f⍤kY</tt>Rank</h2><p>If <tt>X</tt> is omitted, <tt>f</tt> may be any monadic function that returns a result.  <tt>Y</tt> may be any array.</p><p>The Rank operator <tt>⍤</tt><span class="MCTextPopup"><span class="MCTextPopupBody_0" style="display: none; ">The symbol ⍤ is not available in Classic Edition, and the Rank operator is instead represented by ⎕U2364</span><a href="javascript:void(0);" class="MCTextPopupSpot_0" onclick="FMCTextPopup( event, this ); return false;" style="font-size: 0.9em; vertical-align: super">1</a></span>applies function <tt>f</tt> successively to the sub-arrays in <tt>Y</tt> specified by  <tt>k</tt>. If <tt>k</tt> is positive, it selects the k-cells of <tt>Y</tt>. If <tt>k</tt> is negative, it selects the <tt>(r+k)</tt>-cells of <tt>Y</tt> where <tt>r</tt> is its rank. If <tt>k</tt> is <tt>¯1</tt> it selects the major cells of <tt>Y</tt>.</p><p>If <tt>X</tt> is specified, <tt>f</tt> may be any dyadic function that returns a result.  <tt>Y</tt> may be any array.</p><p>In this case, the Rank operator applies function <tt>f</tt> successively between the sub-arrays in <tt>X</tt> and <tt>Y</tt> specified by  <tt>k</tt>. <tt>k</tt> is a 2-element integer vector, or a scalar (which is implicitly extended), whose first element selects sub-arrays in <tt>X</tt> and whose second element selects sub-arrays of <tt>Y</tt>. </p><p> For further information, see  <a href="../intro/variables/cells-and-subarrays.html#CellsSubarrays" class="MCXref_0">Cells and Sub-arrays</a>. </p><p>Notice that it is necessary to prevent the right operand <tt>k</tt> binding to the right argument. This can be done using parentheses e.g. <tt>(f⍤1)Y</tt>. The same can be achieved using  <tt>⊢</tt> because <tt>⍤</tt> binds tighter to its right operand than <tt>⊢</tt> does to its left argument, and <tt>⊢</tt> therefore resolves to Identity.</p><h4>Monadic Examples</h4><p>Using enclose (<tt>⊂</tt>) as the left operand elucidates the workings of the rank operator.</p><pre>      y
 6 37 22
26 10  2
33 33 46
        
19 25 41
 1  2 26
33  0 19
      ⍴y
2 3 3
</pre><p class="pagebreakafter"> </p><pre>
       ⊂⍤2 ⊢y
┌────────┬────────┐
│ 6 37 22│19 25 41│
│26 10  2│ 1  2 26│
│33 33 46│33  0 19│
└────────┴────────┘
</pre><pre>
       ⊂⍤1 ⊢y
┌────────┬───────┬────────┐
│6 37 22 │26 10 2│33 33 46│
├────────┼───────┼────────┤
│19 25 41│1 2 26 │33 0 19 │
└────────┴───────┴────────┘
</pre><p>The function <tt>{(⊂⍋⍵)⌷⍵}</tt> sorts a vector.</p><pre>   {(⊂⍋⍵)⌷⍵} 3 1 4 1 5 9 2 6 5
1 1 2 3 4 5 5 6 9</pre><p>
The rank operator can be used to apply the function to sub-arrays; in this case to sort the 1-cells (rows) of a 3-dimensional array.</p><pre>      y
 6 37 22
26 10  2
33 33 46
        
19 25 41
 1  2 26
33  0 19</pre><pre>

    ({(⊂⍋⍵)⌷⍵}⍤1)y
 6 22 37
 2 10 26
33 33 46
        
19 25 41
 1  2 26
 0 19 33
</pre><h4 class="ExampleNewPage">Dyadic Examples</h4><pre>
      10 20 30 (+⍤0 1)3 4⍴⍳12
10 11 12 13
24 25 26 27
38 39 40 41</pre><p>
Using the function <tt>{⍺ ⍵}</tt>  as the left operand demonstrates how the dyadic case of the rank operator works.</p><pre>
      10 20 30 ({⍺ ⍵}⍤0 1)3 4⍴⍳12
┌──┬─────────┐
│10│0 1 2 3  │
├──┼─────────┤
│20│4 5 6 7  │
├──┼─────────┤
│30│8 9 10 11│
└──┴─────────┘
</pre><p>Note that a right operand of <tt>¯1</tt> applies the function between the major cells (in this case <span class="Italic">elements</span>) of the left argument, and the major cells (in this case <span class="Italic">rows</span>) of the right argument.</p><pre>
      10 20 30 ({⍺ ⍵}⍤¯1)3 4⍴⍳12
┌──┬─────────┐
│10│0 1 2 3  │
├──┼─────────┤
│20│4 5 6 7  │
├──┼─────────┤
│30│8 9 10 11│
└──┴─────────┘
</pre></body>
</html>