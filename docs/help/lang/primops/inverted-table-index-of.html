<!doctype html>
<html>
<head><meta charset="utf-8"><title></title><link rel="stylesheet" href="../../../help.css"></head>
<body><h2><tt>R←X(8⌶)Y</tt>Inverted Table Index Of</h2><p>This function computes <tt>X</tt> index-of <tt>Y</tt> (viz. <tt>X⍳Y</tt>) where <tt>X</tt> and <tt>Y</tt> are compatible inverted tables. <tt>R</tt> is the indices of <tt>Y</tt> in <tt>X</tt>.</p><p>An inverted table is a (nested) vector all of whose items have the same number of major cells. That is, <tt>1=⍴⍴⍵</tt> and <tt>(≢⊃⍵)=≢¨⍵</tt>. An inverted table representation of relational data is more efficient in time and space than other representations.</p><p>The following is an example of an inverted table:</p><pre>      X←(10 3⍴⎕a) (⍳10) 'metalepsis'
      X
┌───┬───────────────────┬──────────┐
│ABC│0 1 2 3 4 5 6 7 8 9│metalepsis│
│DEF│                   │          │
│GHI│                   │          │
│JKL│                   │          │
│MNO│                   │          │
│PQR│                   │          │
│STU│                   │          │
│VWX│                   │          │
│YZA│                   │          │
│BCD│                   │          │
└───┴───────────────────┴──────────┘</pre><p>Using inverted tables, it is often necessary to perform a table look-up to find the "row" indices of one in another. Suppose there is a second table <tt>Y</tt>:</p><pre>
      Y←(⊂⊂3 1 4 1 5 9)⌷¨X
      Y
 GHI  3 1 4 1 5 9  tmamli 
 ABC                      
 JKL                      
 ABC                      
 MNO                      
 YZA  </pre><p>To compute the indices of   <tt>Y</tt> in <tt>X</tt>  using dyadic <tt>⍳</tt>, it is necessary to first un-invert each of the tables in order to create nested matrices that <tt>⍳</tt> can handle.</p><p class="pagebreakafter"> </p><pre>      unvert ← {⍉↑⊂⍤¯1¨⍵}
      unvert X
┌───┬─┬─┐
│ABC│0│m│
├───┼─┼─┤
│DEF│1│e│
├───┼─┼─┤
│GHI│2│t│
├───┼─┼─┤
│JKL│3│a│
├───┼─┼─┤
│MNO│4│l│
├───┼─┼─┤
│PQR│5│e│
├───┼─┼─┤
│STU│6│p│
├───┼─┼─┤
│VWX│7│s│
├───┼─┼─┤
│YZA│8│i│
├───┼─┼─┤
│BCD│9│s│
└───┴─┴─┘

      (unvert X) ⍳ (unvert Y)
3 1 4 1 5 9</pre><p>Each un-inverted table requires considerably more workspace than its inverted form, so if the inverted tables are large, this operation is potentially expensive in terms of both time and workspace.</p><p><tt>8⌶</tt> is an optimised version of the above expression.</p><pre>      X (8⌶) Y
3 1 4 1 5 9</pre></body>
</html>