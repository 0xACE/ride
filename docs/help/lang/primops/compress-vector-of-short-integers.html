<!doctype html>
<html>
<head><meta charset="utf-8"><title></title><link rel="stylesheet" href="../../../help.css"></head>
<body><h2><tt>R←X(219⌶)Y</tt>Compress Vector of Short Integers</h2><p>In this section, the term <span class="Name">sint_vector</span> is used to refer to a simple integer vector whose items are all in the range <tt>¯128</tt> to <tt>127</tt> i.e. they are type 83.  For further information see <a href="../sysfns/data-representation-monadic.html#DataRepresentation(Monadic)" class="MCXref_0">Data Representation (Monadic)</a>.</p><p> In most cases this I-Beam functionality will be used in conjunction with <tt>220⌶</tt> (Serialise/Deserialise Array). However, it may be possible to pass the raw compressed data to and from other applications.</p><p><tt>X</tt> specifies the operation to be performed, either compression or decompression, the compression library to be used, and any  optional parameters. <tt>Y</tt> contains the data to be operated on.</p><h4>Compression</h4><p><tt>Y</tt> must be a <span class="Name">sint_vector</span>. </p><p><tt>R</tt> is a two item vector, each of which is a <span class="Name">sint_vector</span>. <tt>R[1]</tt> describes the compression, and <tt>R[2]</tt> contains the raw data which is the result of applying the compression library to the input data <tt>Y</tt>.</p><p><tt>X</tt> is specified as follows:</p><table style="width: 100%;"><tr><td><tt>X[1]</tt></td><td><tt>X[2]</tt></td><td>Compression Library</td></tr><tr><td>1</td><td>n/a</td><td>LZ4</td></tr><tr><td>2</td><td>0 .. 9</td><td>zlib</td></tr><tr><td>3</td><td>0 .. 9</td><td>gzip</td></tr></table><p>If LZ4 compression is required, then <tt>X</tt> must either be a scalar or a one element vector. Otherwise, <tt>X[2]</tt>, if present, specifies the compression level; higher numbers produce better compression, but take longer. </p><h4>Decompression</h4><p><tt>R</tt> is a <span class="Name">sint_vector</span>, containing the output of applying the decompression library to the input data, <tt>Y</tt>.</p><p>If <tt>X</tt> is a scalar or a one item vector, and has the value 0, then <tt>Y</tt> must be a vector of two items which is the result of previously calling <tt>219⌶</tt> to compress a <span class="Name">sint_vector</span>.</p><p>Otherwise, <tt>X</tt> is a scalar or one or two element vector. The first element of <tt>X</tt> must be one of the following values.</p><table style="width: 100%;"><tbody><tr><td><tt>X[1]</tt></td><td>Compression Library</td></tr><tr><td><tt>¯1</tt></td><td>LZ4</td></tr><tr><td><tt>¯2</tt></td><td>zlib</td></tr><tr><td><tt>¯3</tt></td><td>gzip</td></tr></tbody></table><p>The second, optional, element of <tt>X</tt> specifies the length of the uncompressed data. Its presence results in a more efficient use of the compression library.</p><p><tt>X</tt> may not be a two item vector whose first item has the value 0.</p><h4>Examples</h4><pre>
      sint←{⍵-256×⍵&gt;127}
      utf8←'UTF-8'∘⎕ucs
      str←'empty←⍬'
      ⊣v←sint utf8  str
101 109 112 116 121 ¯30 ¯122 ¯112 ¯30 ¯115 ¯84			
      ⊣comp←1 (219⌶) v
8 ¯55 1 0 0 0 0 11  ¯80 101 109 112 116 121 ¯30 ¯122 ¯112 ¯30 ¯115 ¯84			
      
      utf8 256| 0(219⌶)comp
empty←⍬
      utf8 256| ¯1(219⌶)2⊃comp
empty←⍬					  </pre><script src="../../../help.js"></script></body>
</html>