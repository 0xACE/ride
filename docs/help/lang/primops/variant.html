<!doctype html>
<html>
<head><meta charset="utf-8"><title></title><link rel="stylesheet" href="../../../help.css"></head>
<body><h2><tt>{R}←{X}(f ⍠ B)Y</tt>Variant</h2><p>The Variant operator <tt>⍠</tt> specifies the value of an <span class="Italic">option</span> to be used by its left operand function <tt>f</tt>. An <span class="Italic">option</span> is a named property of a function whose value in some way affects the operation of that function.</p><p>For example, the Search and Replace operators include options named <tt>IC</tt> and <tt>Mode</tt>which respectively determine whether or not <span class="Italic">case</span> is ignored and in what manner the input document is processed.</p><p>One of the set of options may be designated as the <span class="Italic">Principal option</span> whose value may be set using a short-cut form of syntax as described below. For example, the Principal option for the Search and Replace operators is <tt>IC</tt>.</p><p><tt>⍠</tt> and <tt>⎕OPT</tt> are synonymous though only the latter is available in the Classic Edition.</p><p>For the operand function with right argument <tt>Y</tt> and optional left argument <tt>X</tt>, the right operand <tt>B</tt> specifies the values of one or more options that are applicable to that function. <tt>B</tt> may be a scalar, a 2-element vector, or a vector of 2-element vectors which specifies values for one or more options as follows:</p><ul><li value="1">If <tt>B</tt> is a 2-element vector and the first element is a character vector, it specifies an option name in the first element and the option value (which may be any suitable array) in the second element.</li><li value="2">If <tt>B</tt> is a vector of 2-element vectors, each item of B is interpreted as above.</li><li value="3">If <tt>B</tt> is a scalar (a rank-0 array of any depth), it specifies the value of the Principal option,</li></ul><p>Option names and their values must be appropriate for the left operand function, otherwise <tt>DOMAIN ERROR</tt> (error code 11) will be reported.</p><h4>Example </h4><pre>
       tn←'Dick'(⎕FCREATE⍠'Z' 1)0</pre><p>The following illustrations and examples apply to functions derived from the Search and Replace operators.</p><h4>Examples of operand <tt>B</tt></h4><p>The following expression sets the <tt>IC</tt> option to <tt>1</tt>, the <tt>Mode</tt> option to <tt>'D'</tt> and the <tt>EOL</tt> option to <tt>'LF'</tt>. </p><pre>      ⍠('Mode' 'D')('IC' 1)('EOL' 'LF')</pre><p>The following expression sets just the <tt>EOL</tt> property to <tt>'CR'</tt>.</p><pre>      ⍠'EOL' 'CR'</pre><p>The following expression sets just the Principal option (which for the Search and Replace operators is <tt>IC</tt>) to 1.</p><pre>      ⍠ 1</pre><p>The order in which options are specified is typically irrelevant but if the same option is specified more than once, the rightmost one dominates. The following expression sets the option <tt>IC</tt> to 1:</p><pre>      ⍠('IC' 0) ('IC' 1)</pre><p>The Variant operator generates a derived function <tt>f⍠B</tt> and may be assigned to a name. The derived function is effectively function <tt>f</tt> bound with the option values specified by <tt>B</tt>.</p><p>The derived function may itself be used as a left operand to Variant to produce a second derived function whose options are further modified by the second application of the operator. The following sets the same options as the first example above:</p><pre>      ⍠'Mode' 'D'⍠'IC' 1⍠'EOL' 'LF'</pre><p>When the same option is specified more than once in this way, the outermost (rightmost) one dominates. The following expression also sets the option <tt>IC</tt> to 1:</p><pre>      ⍠'IC' 0⍠'IC' 1</pre><h4>Further Examples</h4><p>The following derived function returns the location of the word <tt>'variant'</tt> within its right argument using default values for all the options.</p><pre>      f1 ← 'variant' ⎕S 0
      f1 'The variant Variant operator'
4</pre><p>It may be modified to perform a case-insensitive search:</p><pre>      (f1 ⍠ 1) 'The variant Variant operator'
4 12</pre><p>This modified function may be named:</p><pre>      f2 ← f1 ⍠ 1
      f2 'The variant Variant operator'
4 12</pre><p>The modified function may itself be modified, in this case to revert to a case sensitive search:</p><pre>      f3 ← f2 ⍠ 0
      f3 'The variant Variant operator'
4</pre><p>This is equivalent to:</p><pre>      (f1 ⍠ 1 ⍠ 0) 'The variant Variant operator'
4</pre></body>
</html>