<!doctype html>
<html>
<head><meta charset="utf-8"><title></title><link rel="stylesheet" href="../../../../help.css"></head>
<body><h3>Name Scope</h3><p>APL’s name scope rules apply whether a function call is synchronous or asynchronous. For example when a defined function is called, names in the calling environment are visible, unless explicitly shadowed in the function header.</p><p>Just as with a synchronous call, a function called asynchronously has its own local environment, but can communicate with its parent and ‘sibling’ functions via local names in the parent.</p><p>This point is important. It means that siblings can run in parallel without danger of local name clashes. For example, a GUI application can accommodate multiple concurrent instances of its callback functions.</p><p>However, with an asynchronous call, as the calling function continues to execute, both child <span class="Italic">and parent functions </span>may modify values in the calling environment. Both functions see such changes immediately they occur.</p><p>If a parent function terminates while any of its children are still running, those children will thenceforward ‘see’ local names in the environment that called the parent function. In cases where a child function relies on its parent’s environment (the setting of a local value of <tt>⎕IO</tt> for example), this would be undesirable, and the parent function would normally execute a <tt>⎕TSYNC</tt> in order to wait for its children to complete before itself exiting.</p><p>If, on the other hand, after launching an asynchronous child, the parent function calls a <span class="Italic">new </span>function (either synchronously or asynchronously); names in the new function are beyond the purview of the original child. In other words, a function can only ever see its calling stack decrease in size – never increase. This is in order that the parent may call new defined functions without affecting the environment of its asynchronous children.</p></body>
</html>