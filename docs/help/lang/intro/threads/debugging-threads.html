<!doctype html>
<html>
<head><meta charset="utf-8"><title></title><link rel="stylesheet" href="../../../../help.css"></head>
<body><h3>Debugging Threads</h3><p>If a thread sustains an untrapped error, its execution is <span class="Italic">suspended</span> in the normal way. If the <span class="Italic">Pause on Error</span> option (see User Guide) is set, all other threads are <span class="Italic">paused</span>. If <span class="Italic">Pause on Error</span> option (see User Guide) is not set, other threads will continue running and it is possible for another thread to encounter an error and suspend.</p><p>Using the facilities provided by the Tracer and the Threads Tool (see User Guide) it is possible to interrupt (suspend) and restart individual threads, and to pause and resume individual threads, so any thread may be in one of three states - <span class="Italic">running</span>, <span class="Italic">suspended</span> or <span class="Italic">paused</span>.</p><p>The Tracer and the Session may be connected with any suspended thread and you can switch the attention of the Session and the Tracer between suspended threads using <tt>)TID</tt> or by clicking on the appropriate tab in the Tracer. At this point, you may:</p><ul><li value="1">Examine and modify local variables for the currently suspended thread.</li><li value="2">Trace and edit functions in the current thread.</li><li value="3">Cut back the stack in the currently suspended thread.</li><li value="4">Restart execution.</li><li value="5">Start new threads</li></ul><p>The error message from a thread other than the base is prefixed with its thread number:</p><pre>260:DOMAIN ERROR
Div[2] rslt←num÷div
      ^</pre><p>State indicator displays: <tt>)SI</tt> and <tt>)SINL</tt> have been extended to show threads’ tree-like calling structure.</p><pre>      )SI
·   #.Calc[1]
&amp;5
·   ·   #.DivSub[1]
·   &amp;7
·   ·   #.DivSub[1]
·   &amp;6
·   #.Div[2]*
&amp;4
#.Sub[3]
#.Main[4]</pre><p>Here, <tt>Main</tt> has called <tt>Sub</tt>, which has spawned threads <tt>4</tt> and <tt>5</tt> with functions: <tt>Div</tt> and <tt>Calc</tt>. Function <tt>Div</tt>, after spawning <tt>DivSub</tt> in each of threads <tt>6</tt> and <tt>7</tt>, have been suspended at line <tt>[2]</tt>.</p><p>Removing stack frames using <span class="Italic">Quit</span> from the Tracer or <tt>→</tt> from the session affects only the current thread. When the final stack frame in a thread (other than the base thread) is removed, the thread is expunged.</p><p><tt>)RESET </tt>removes all but the base thread.</p><p>Note the distinction between a <span class="Italic">suspended</span> thread and a <span class="Italic">paused</span> thread.</p><p>A <span class="Italic">suspended</span> thread is stopped at the beginning of a line in a defined function or operator. It may be connected to the Session so that expressions executed in the Session do so in the context of that thread. It may be <span class="Italic">restarted</span> by executing <tt>→line</tt> (typically, <tt>→⎕LC</tt>).</p><p>A <span class="Italic">paused</span> thread is an inactive thread that is currently being ignored by the thread scheduler. A paused thread may be paused within a call to <tt>⎕DQ</tt>, a call on an external function, at the beginning of a line, or indeed at any of the thread-switching points described earlier in this chapter.</p><p>A paused thread may be <span class="Italic">resumed</span> only by the action of a menu item or button. A paused thread resumes only in the sense that it ceases to be ignored by the thread scheduler and will therefore be switched back to at some point in the future. It does not actually continue executing until the switch occurs.</p><script src="../../../../help.js"></script></body>
</html>