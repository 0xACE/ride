<!doctype html>
<html>
<head><meta charset="utf-8"><title></title><link rel="stylesheet" href="../../../help.css"></head>
<body><h2><tt>{X}⎕SIGNAL Y</tt>
Signal Event </h2><p><tt>Y</tt> must be a scalar or vector. </p><p>If <tt>Y</tt> is a an empty vector nothing is signalled. </p><p>If <tt>Y</tt> is a vector of more than one element, all but the first element are ignored.</p><p>If the first element of <tt>Y</tt> is a simple integer in the range 1-999 it is taken to be an event number.  <tt>X</tt> is an optional text message.   If present, <tt>X</tt> must be a simple character scalar or vector, or an object reference. If <tt>X</tt> is omitted or is  empty, the standard event message for the corresponding event number  is assumed. See <a href="../errors/apl-errors.html#APLErrors" class="MCXref_0">APL Error Messages</a> . If there is no standard message, a message of the form <tt>ERROR NUMBER n</tt> is composed, where <tt>n</tt> is the event number in <tt>Y</tt>. Values outside the range 1-999 will result in a <tt>DOMAIN ERROR</tt>.</p><p>If the first element of <tt>Y</tt> is a 2 column matrix or a vector of 2 element vectors of name/values pairs, then it is considered to be a set of values to be used to override the default values in a new instance of <tt>⎕DMX</tt>. Any other value for the first element of <tt>Y</tt> will result in a <tt>DOMAIN ERROR</tt>.</p><p>The names in the error specification must all  appear in a system-generated <tt>⎕DMX</tt>, otherwise a <tt>DOMAIN ERROR</tt> will be issued. For each name specified, the default value in the new instance of <tt>⎕DMX</tt> is replaced with the value specified. <tt>EN</tt> <b>must</b> be one of the names in the error specification. Attempting to specify certain names, including InternalLocation and <tt>DM</tt>, will result in a <tt>DOMAIN ERROR</tt>. The value which is to be assigned to a name must be appropriate to the name in question.</p><p>Dyalog may enhance <tt>⎕DMX</tt> in future, thus potentially altering the list of valid and/or assignable names. </p><p>If the first element of <tt>Y</tt> is an array of name/value pairs then  specifying any value for <tt>X</tt> will result in a <tt>DOMAIN ERROR</tt>.</p><p>The effect of the system function is to interrupt execution.  The state indicator is cut back to exit from the function or operator containing the line that invoked <tt>⎕SIGNAL</tt>, or is cut back to exit the Execute (<tt>⍎</tt>) expression that invoked <tt>⎕SIGNAL</tt>, and an error is then generated.</p><p>An error interrupt may be trapped if the system variable <tt>⎕TRAP</tt> is set to intercept the event.  Otherwise, the standard system action is taken (which may involve cutting back the state indicator further if there are locked functions or operators in the state indicator).  The standard event message is replaced by the text given in <tt>X</tt>, if present.</p><h4 class="ExampleNewPage">Example</h4><pre>      ⎕VR'DIVIDE'
     ∇ R←A DIVIDE B;⎕TRAP
[1]    ⎕TRAP←11 'E' '→ERR'
[2]    R←A÷B ⋄ →0
[3]   ERR:'DIVISION ERROR' ⎕SIGNAL 11
     ∇
 
      2 4 6 DIVIDE 0
DIVISION ERROR
      2 4 6 DIVIDE 0
     ^</pre><p>If you are using the Microsoft .Net Framework, you may use <tt>⎕SIGNAL</tt> to throw an exception by specifying a value of 90 in <tt>Y</tt>. In this case, if you specify the optional left argument <tt>X</tt>, it must be a reference to a .Net object that is or derives from the Microsoft .Net class System.Exception. The following example illustrates a <span class="Italic">constructor</span> function <tt>CTOR</tt> that expects to be called with a value for <tt>⎕IO</tt> (0 or 1)</p><pre>     ∇ CTOR IO;EX
[1]    :If IO∊0 1
[2]        ⎕IO←IO
[3]    :Else
[4]        EX←ArgumentException.New'IO must be 0 or 1'
[5]        EX ⎕SIGNAL 90
[6]    :EndIf
     ∇</pre><h4>Further examples</h4><h4>Example 1</h4><pre class="APLCodeSmall">
      'Hello'⎕SIGNAL 200
Hello
      'Hello'⎕SIGNAL 200
     ∧
      ⎕DMX
 EM       Hello 
 Message        
 HelpURL             

      ⎕DM
 Hello        'Hello'⎕SIGNAL 200       ∧ 
</pre><p class="pagebreakafter"> </p><pre class="APLCodeSmall">
      ⎕SIGNAL⊂⊂('EN' 200)
ERROR 200
      ⎕SIGNAL⊂⊂('EN' 200)
     ∧

      ⎕DMX
 EM       ERROR 200 
 Message            
 HelpURL     

      ⎕DM
 ERROR 200        ⎕SIGNAL⊂⊂('EN' 200)       ∧ 
</pre><h4>Example 2</h4><pre class="APLCodeSmall">
      ⎕SIGNAL⊂('EN' 200)('Vendor' 'Andy')('Message' 'My error')
ERROR 200: My error
      ⎕SIGNAL⊂('EN' 200)('Vendor' 'Andy')('Message' 'My error')
     ∧
</pre><pre>      ⎕DMX
 EM       ERROR 200 
 Message  My error  
 HelpURL</pre><pre>      ⍪⎕DMX.(EN EM Vendor)
       200 
 ERROR 200 
      Andy </pre><p>Be aware of the following case, in which the argument has not been sufficiently nested:</p><pre class="APLCodeSmall">
      ⎕SIGNAL⊂('EN' 200)
DOMAIN ERROR: Unexpected name in signalled ⎕DMX specification
      ⎕SIGNAL⊂('EN' 200)
     ∧
</pre><script src="../../../help.js"></script></body>
</html>