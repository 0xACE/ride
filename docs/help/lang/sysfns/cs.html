<!doctype html>
<html>
<head><meta charset="utf-8"><title></title><link rel="stylesheet" href="../../../help.css"></head>
<body><h2><tt>{R}←{X}⎕CS Y</tt>Change Space</h2><p><tt>Y</tt> must be namespace reference (ref) or a simple character scalar or vector identifying the name of a namespace.</p><p>If specified, <tt>X</tt> is a simple character scalar, vector, matrix or a nested vector of character vectors identifying zero or more workspace objects to be <span class="Italic">exported</span> into the namespace <tt>Y</tt>.</p><p>The identifiers in <tt>X</tt> and <tt>Y</tt> may be simple names or compound names separated by <tt>'.'</tt> and including the names of the special namespaces <tt>'⎕SE'</tt>, <tt>'#'</tt>, and <tt>'##'</tt>.</p><p>The result <tt>R</tt> is the full name (starting <tt>#.</tt>) of the space in which the function or operator was executing prior to the <tt>⎕CS</tt>.</p><p><tt>⎕CS</tt> changes the space in which the current function or operator is running to the namespace <tt>Y</tt> and returns the original space, in which the function was previously running, as a shy result.  <b>After the </b><tt>⎕CS</tt>, references to <span class="Italic">global</span> names (with the exception of those specified in <tt>X</tt>) are taken to be references to <span class="Italic">global</span> names in <tt>Y</tt>.  References to <span class="Italic">local</span> names (i.e. those local to the current function or operator) are, with the exception of those with name class 9, unaffected. Local names with name class  9 are however no longer visible.</p><p>When the function or operator terminates, the calling function resumes execution in its original space.</p><p>The names listed in <tt>X</tt> are temporarily <span class="Italic">exported</span> to the namespace <tt>Y</tt>.  If objects with the same name exist in <tt>Y</tt>, these objects are effectively<span class="Italic"> shadowed</span> and are inaccessible. Note that Dyadic <tt>⎕CS</tt> may be used only if there is a traditional function in the state indicator (stack). Otherwise there would be no way to retract the export. In this case (for example in a clear workspace) <tt>DOMAIN ERROR</tt> is reported.</p><p>Note that calling <tt>⎕CS</tt> with an empty argument <tt>Y</tt> obtains the namespace in which a function is currently executing.</p><h4>Example</h4><p>This simple example illustrates how <tt>⎕CS</tt> may be used to avoid typing long pathnames when building a tree of GUI objects.  Note that the objects <tt>NEW</tt> and <tt>OPEN</tt> are created as children of the <tt>FILE</tt> menu as a result of using <tt>⎕CS</tt> to change into the <tt>F.MB.FILE</tt> namespace.</p><p class="pagebreakafter"> </p><pre>     ∇ MAKE_FORM;F;OLD
[1]    'F'⎕WC'Form'
[2]    'F.MB'⎕WC'MenuBar'
[3]    'F.MB.FILE'⎕WC'Menu' '&amp;File'
[4]
[5]    OLD←⎕CS'F.MB.FILE'
[6]    'NEW'⎕WC'MenuItem' '&amp;New'
[7]    'OPEN'⎕WC'MenuItem' '&amp;Open'
[8]    ⎕CS OLD
[9]
[10]   'F.MB.EDIT'⎕WC'Menu' '&amp;Edit'
[11]
[12]   OLD←⎕CS'F.MB.EDIT'
[13]   'UNDO'⎕WC'MenuItem' '&amp;Undo'
[14]   'REDO'⎕WC'MenuItem' '&amp;Redo'
[15]   ⎕CS OLD
[16]   ...
     ∇</pre><h4>Example</h4><p>Suppose a form <tt>F1</tt> contains buttons <tt>B1</tt> and <tt>B2</tt>. Each button maintains a count of the number of times it has been pressed, and the form maintains a count of the total number of button presses. The single callback function <tt>PRESS</tt> and its subfunction <tt>FMT</tt> can reside in the form itself</p><pre>      )CS F1
#.F1
      ⍝ Note that both instances reference
      ⍝ the same callback function
      'B1'⎕WS'Event' 'Select' 'PRESS'
      'B2'⎕WS'Event' 'Select' 'PRESS'
 
      ⍝ Initialise total and instance counts.
      TOTAL ← B1.COUNT ← B2.COUNT ← 0
 
    ∇ PRESS MSG
[1]   'FMT' 'TOTAL'⎕CS⊃MSG ⍝     Switch to instance space
[2]   (TOTAL COUNT)+←1   ⍝    Incr total &amp; instance count
[3]   ⎕WS'Caption'(COUNT FMT TOTAL)⍝ Set instance caption
    ∇
 
    ∇ CAPT←INST FMT TOTL      ⍝ Format button caption.
[1]   CAPT←(⍕INST),'/',⍕TOTL  ⍝ E.g. 40/100.
    ∇</pre><h4>Example</h4><p>This example uses <tt>⎕CS</tt> to explore a namespace tree and display the structure.  Note that it must export its own name (tree) each time it changes space, because the name tree is global.</p><pre>      ∇ tabs tree space;subs     ⍝ Display namespace tree
[1]    tabs,space
[2]    'tree'⎕CS space
[3]    →(⍴subs←↓⎕NL 9)↓0
[4]    (tabs,'.   ')∘tree¨subs
     ∇ 
 
      )ns x.y
#.x.y
      )ns z
#.z
      ''tree '#'
#
.   x
.   .   y
.   z</pre><p> </p></body>
</html>