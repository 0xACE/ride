<!doctype html>
<html>
<head><meta charset="utf-8"><title></title><link rel="stylesheet" href="../../../help.css"></head>
<body><h2><tt>R←{X}⎕ARBIN Y</tt>Arbitrary Input </h2><p>This transmits the prompt <tt>Y</tt> to an output device specified by <tt>X</tt> prior to reading from an input device specified by <tt>X</tt>.</p><p>Under Windows, the use of <tt>⎕ARBIN</tt> to the screen  is not supported.</p><p><tt>Y</tt> may be a scalar, a simple vector, or a vector of simple scalars or vectors.  The items of the simple arrays of <tt>Y</tt> must each be a character, or a number in the range 0 to 255.  Numbers are sent to the output device without translation.  Characters undergo the standard <tt>⎕AV</tt> to ASCII translation.  If <tt>Y</tt> is an empty vector, no codes are sent to the output device.</p><p><tt>X</tt> may take several forms:</p><table><tbody><tr><td class="DyalogPlain">terminate (input output)</td><td class="DyalogPlain">⎕ARBIN</td><td class="DyalogPlain">prompt</td></tr><tr><td class="DyalogPlain"> terminate input</td><td class="DyalogPlain">⎕ARBIN</td><td class="DyalogPlain">prompt</td></tr><tr><td class="DyalogPlain">terminate</td><td class="DyalogPlain">⎕ARBIN</td><td class="DyalogPlain">prompt</td></tr><tr><td class="DyalogPlain"> </td><td class="DyalogPlain">⎕ARBIN</td><td class="DyalogPlain">prompt</td></tr></tbody></table><p>Each of these elements is discussed separately.</p><h4>&lt;terminate&gt;</h4><p>This defines how the read should be terminated.</p><p>If it is omitted, the read terminates on receipt of a Carriage Return (CR) character.</p><p>If supplied, it must be a simple numeric scalar or vector.</p><ul><li value="1">If it is a numeric scalar, it defines the number of characters to be read.</li><li value="2">If it is a numeric vector, it defines a set of terminating characters.</li><li value="3">If it is the null vector, the read terminates on CR.</li></ul><h4>&lt;input&gt;</h4><p>This defines the input device.</p><p>If this is omitted, input is taken from standard input (usually the keyboard).</p><p>If supplied, it must be a simple numeric scalar or a simple text vector.</p><ul><li value="1">If it is a numeric scalar, it must correspond to a Windows device handle or UNIX stream number.</li><li value="2">If it is a text vector, it must correspond to a valid device or file name.</li></ul><p>You must have permission to read from the chosen device.</p><h4>&lt;output&gt;</h4><p>This defines the output device.</p><p>If this is omitted, output is sent to standard output (usually the screen).</p><p>If supplied, it must be a simple numeric scalar or a simple text vector.</p><ul><li value="1">If it is a numeric scalar, it must correspond to a Windows device handle or UNIX stream number.</li><li value="2">If it is a text vector, it must correspond to a valid device or file name.</li></ul><p>You must have permission to write to the chosen device.</p><p>The result <tt>R</tt> is a simple numeric vector.  Each item of <tt>R</tt> is the numeric representation of an 8-bit code in the range 0 to 255 received from the input device.  The meaning of the code is dependent on the characteristics of the input device.  If a set of delimiters was defined by &lt;terminate&gt;, the last code returned will belong to that set.</p><p><tt>⎕RTL</tt> (Response Time Limit) is an implicit argument of <tt>⎕ARBIN</tt>.  This allows a time limit to be imposed on input.  If the time limit is reached, <tt>⎕ARBIN</tt> returns with the codes read up to that point.</p><h4>Examples</h4><p>Write <tt>HELLO</tt> on the screen, and read a line of input from the keyboard:</p><pre>      R ← ⎕ARBIN 'HELLO'</pre><p>Beep three times, send <tt>ARE YOU AWAKE?</tt> to the screen and wait for a 1 character answer from the keyboard:</p><pre>      R ← 1 ⎕ARBIN 7 7 7 'ARE YOU AWAKE (Y/N)'</pre><p>Read a line from <tt>MYFILE</tt>:</p><pre>      R ← '' 'MYFILE' ⎕ARBIN ''</pre><p>Read <tt>MYFILE</tt> until a SPACE (code 32):</p><pre>      R ← (,32) 'MYFILE' ⎕ARBIN ''</pre><p>Read <tt>MYFILE</tt> until a SPACE (code 32) or a TAB (code 9):</p><pre>      R ← (32 9) 'MYFILE' ⎕ARBIN ''</pre><p>Write <tt>HELLO</tt> on /dev/tty1 (a UNIX terminal screen), then read a line from /dev/tty1 (a UNIX terminal keyboard):</p><pre>      R ← '' ('/dev/tty1' '/dev/tty1') ⎕ARBIN 'HELLO'</pre><p>Write <tt>TITLE</tt> to LPT1 (a Windows printer device), then read from COM1 (a Windows serial port) up to the first CR character:</p><pre>      R ← (,13) ('COM1' 'LPT1') ⎕ARBIN 'TITLE'</pre><p>Read 100 characters from COM1; timeout after 10 secs:</p><pre>      ⎕RTL←10
      R←100 'COM1' ⎕ARBIN ''
      ⍎(100≠⍴R)/'''Read timed out'''</pre><p>Read until DELIM from COM1; timeout after 10 secs:</p><pre>      ⎕RTL←10
      R←(,DELIM) 'COM1' ⎕ARBIN ''
      ⍎(DELIM≠¯1↑R)/'''Read timed out'''</pre></body>
</html>