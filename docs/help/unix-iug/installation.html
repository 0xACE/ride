<!doctype html>
<html>
<head><meta charset="utf-8"><title></title><link rel="stylesheet" href="../../help.css"></head>
<body><h2>Installation</h2><p>This manual covers the installation of the non-GUI version of Dyalog APL on AIX, and on Linux distributions which use either .rpm or .deb files for installing software. If you are using a Linux distribution which uses some other method, or you wish to have a non-default installation, then there are some suggestions about how such an installation might be completed.
        </p><p>Dyalog APL V<span class="TitlePageVersion">14.0</span> is supplied in either 32 or 64 bit versions, and in either Classic or Unicode editions. The installation procedure for Dyalog APL is the same in each case. Note that the 64-bit versions of Dyalog APL will only run on a 64-bit operating systems; the 32-bit versions of Dyalog APL will run on both 32 and 64 bit operating systems.</p><p>It is assumed that in all cases the installation image has been downloaded into /tmp on the local machine.</p><p>The default installation subdirectory will be formed as:</p><pre class="Code">/opt/mdyalog/<span class="TitlePageVersion">14.0</span>/&lt;APLWidth&gt;/&lt;APLEdition&gt;</pre><p>or, in the case of AIX:</p><pre class="Code">/opt/mdyalog/<span class="TitlePageVersion">14.0</span>/&lt;APLWidth&gt;/&lt;APLEdition&gt;/&lt;platform&gt;</pre><p>So for example, Dyalog APL Version <span class="TitlePageVersion">14.0</span> 32 bit Unicode for POWER6 hardware on AIX will by default be installed into
        </p><pre class="Code">/opt/mdyalog/<span class="TitlePageVersion">14.0</span>/32/unicode/p6        </pre><p>whereas on a Linux distribution the equivalent version would be installed in</p><pre class="Code">/opt/mdyalog/<span class="TitlePageVersion">14.0</span>/32/Unicode        </pre><p>This naming convention began with Version 12.0, and is planned to continue into the future. This ensures that all versions and releases of Dyalog APL can be installed in parallel.</p><p>Other than the Dyalog APL application shortcut (.desktop), Icon and the rpm/deb related database information no files are created outside the Dyalog installation directory; in particular, unlike earlier versions of Dyalog APL, no files are placed in /usr/bin.</p><p>When supplying updates or fixes, Dyalog issues a full installation image; this means that any file under the installation subdirectory may be overwritten. It is therefore strongly recommended that users do not alter issued files, as those changes could be lost if an update is installed.
        </p><h3>Installing under AIX</h3><p>For each version of Dyalog APL on AIX three separate hardware-specific builds are created for each of the four combinations of 32 or 64 bit versions, Classic or Unicode editions. For 13.0 and prior these are p3, p5 and p6. For 13.1 onwards (as of September 2012) specific builds for p5, p6 and p7 are created. </p><pre class="Code">$ su -
# cd /opt
# cpio -icdvum &lt;/tmp/dyalog-20090901-64-unicode-p6.cpi
# /opt/mdyalog/14.0/64/unicode/p6/make_scripts
# exit</pre><p>Dyalog APL is now installed. To run as any user, type</p><pre class="Code">$ /opt/mdyalog/14.0/64/unicode/p6/mapl</pre><p>Notes:</p><ul><li value="1">Version 14.0 onwards are compiled on AIX6.1: the 32 bit version of 14.0 has also been tested on AIX5.3 Technical Maintenance Level 9</li></ul><h3>Installing on an RPM-based Linux Distribution</h3><pre class="Code">$ su -
# rpm --install /tmp/dyalog-121C32r14707-20120921.linux.i386.rpm
# /opt/mdyalog/14.0/32/classic/make_scripts
# exit</pre><p>Dyalog APL is now installed. To run as any user, type</p><pre class="Code">$ /opt/mdyalog/14.0/32/classic/mapl</pre><h4 class="Note">Notes:</h4><ul class="Note"><li value="1">It may be necessary to use the --force flag or equivalent if an earlier version of Dyalog APL is to be installed on the same server as a later version. This is safe since the versions have no files in common.</li><li value="2">It has been noticed that in some circumstances the 32-bit installs fail on 64-bit operating systems due to a missing ncurses package. However, it appears that that package is indeed installed. What is required however is the 32-bit version: once installed, Dyalog APL will then install.</li><li value="3">Version 14.0 has been successfully installed on RHEL5/Centos5 and SUSE12.3 and later versions of these distributions.</li></ul><h3>Installing on a DEB-based Linux Distribution</h3><pre class="Code">$ sudo su -
# dpkg --install dyalog-unicode_14.0.16658_i386.deb
# exit</pre><p>Dyalog APL is now installed. To run as any user, type</p><pre class="Code">$ /opt/mdyalog/14.0/32/unicode/mapl</pre><h4 class="Note">Notes:</h4><ul class="Note"><li value="1">It may be necessary to use the --force flag or equivalent if an earlier version of Dyalog APL is to be installed on the same server as a later version. This is safe since the versions have no files in common.</li><li value="2">If dpkg generates dependency errors, run  <span class="Code">apt-get install -f</span> (as root)</li><li value="3">It has been noticed that in some circumstances the 32-bit installs fail on 64-bit operating systems due to a missing ncurses package. However, it appears that that package is indeed installed. What is required however is the 32-bit version: once installed, Dyalog APL will then install.</li></ul><h3>Installing in a non-default location</h3><p>It is possible to install Dyalog APL for UNIX in non-default locations, without the need for root privileges.</p><p>For all UNIXes, </p><p class="Code">cd &lt;directory under which I wish to install Dyalog APL&gt;</p><p>For AIX: </p><p class="Code">cpio -icvdum &lt;installation_image.cpi</p><p>For .deb based Linux distributions: </p><p class="Code">/usr/bin/dpkg --extract installation_image.deb .</p><p>For .rpm based Linux distributions</p><p class="Code">rpm2cpio installation_image.rpm | cpio -icdvum</p><p>For all UNIXes:</p><p class="Code">find opt/mdyalog -name make_scripts -exec {} \;</p><p>This last step generates the mapl script; should you chose to move the installation directory, it will be necessary to re-run the make_scripts script so that the environment variable $DYALOG is set correctly.</p><p> </p><h3>Minimal Installation</h3><p>An absolutely minimal installation of the development version of Dyalog APL consists of something similar to one of the two following examples. The maximum workspace size would be 4MB, and all workspaces and auxiliary processors would have to be accessed using either absolute or relative pathnames. It is not necessary to have superuser permissions to perform this installation, since no files are being written to directories for which the user does not have write permission.</p><p>In this example it is assumed that a full install has been completed of the 32-bit Unicode version on Linux. Once the files have been extracted, then the installation could be removed. It is also assumed that suitable preparation of the terminal environment has been completed (see Terminals and Terminal Emulators).</p><p>To set up:</p><pre class="Code">$ mkdir dyalog_min
$ cd dyalog_min
$ mkdir aplkeys
$ mkdir apltrans
$ cp /opt/mdyalog/14.0/32/unicode/dyalog .
$ cp /opt/mdyalog/14.0/32/unicode/aplkeys/xterm aplkeys
$ cp /opt/mdyalog/14.0/32/unicode/apltrans/xterm apltrans
$ cp /opt/mdyalog/14.0/32/unicode/apltrans/file apltrans</pre><p>To run:</p><pre class="Code">$ cd dyalog_min
$ export APLKEYS=`pwd`/aplkeys
$ export APLTRANS=`pwd`/apltrans
$ APLK0=xterm APLT=xterm ./dyalog</pre><pre>Dyalog APL/S Version 14.0.0
Unicode Edition
Sun Oct 18 13:45:21 2009
clear ws

      16 16⍴⎕av
...</pre><p>or</p><p>To set up:</p><pre class="Code">$ mkdir dyalog_min
$ cd dyalog_min
$ cp /opt/mdyalog/14.0/32/unicode/dyalog .
$ cp /opt/mdyalog/14.0/32/unicode/aplkeys/xterm xterm.in
$ cp /opt/mdyalog/14.0/32/unicode/apltrans/xterm xterm.out
$ cp /opt/mdyalog/14.0/32/unicode/apltrans/file .</pre><p>To run:</p><pre class="Code">$ cd dyalog_min
$ export APLKEYS=`pwd`
$ export APLTRANS=`pwd`
$ export APLK=xterm.in
$ export APLT=xterm.out
$ export APLT10=file
$ export APLT11=file
$ ./dyalog</pre><pre>Dyalog APL/S Version 14.0.0
Unicode Edition
Sun Oct 18 13:45:21 2009
clear ws

      16 16⍴⎕av
...</pre><p>In the first example the input and output translate tables are in separate subdirectories, so there is no need to override the TERM variable with values for APLK and APLT.</p><p>In the second example the two translate tables both are named differently from the value of $TERM, so each has to be defined. Note also that it may be necessary to have the file output translate table present: like other UNIX processes, Dyalog APL inherits the open file descriptors of its parent process, and each of them will need to have a translate table associated with it. So for example, under KDE4 on openSUSE, a Konsole terminal window has file descriptors 0 1 2 10 11 open; Dyalog APL will need therefore to have APLT10 and APLT11 defined too.</p><p>Further details regarding configuring the Dyalog APL environment can be found in the Starting APL section.</p><h3>Deinstalling Dyalog APL</h3><p>In the following examples, it is assumed that only Dyalog APL 14.0 64-bit unicode is installed on the server; the commands to delete directories will need to be more specific if multiple versions of Dyalog APL are installed.</p><p>Should it be necessary to deinstall Dyalog APL, then the process is:</p><h4>Deinstalling under AIX</h4><pre class="Code">$ su -
# cd /opt
# rm -rf mdyalog/14.0</pre><h4>Deinstalling on an RPM-based Linux Distribution</h4><pre class="Code">
$ su -
# rpm -e dyalog.32.classic-14.0-20090901
# cd /opt
# rm -rf mdyalog/14.0
# exit</pre><h4>Deinstalling on a DEB-based Linux Distribution</h4><pre class="Code">
$ sudo su -
# apt-get purge dyalog-unicode-140
# cd /opt
# rm -rf mdyalog/14.0
# exit
</pre><h3>Upgrading APL</h3><h4>Applying a later release of the same version</h4><p>In general Dyalog will issue a new installation image if a problem is discovered which requires a new version of the interpreter. Dyalog recommends that the entire installation image is installed over the existing installation, but that is not essential. Particularly in a live environment it may be preferable to install only a revised interpreter. This can be done by extracting the individual files from the installation image, and copying them into the correct place in the installation directory tree. To apply a fix image, run the appropriate installation command with the -force option if appropriate. Be aware: the process of installing a later installation image over an already installed version of Dyalog APL WILL result in all files being overwritten. If you have changed any, it will be necessary to take copies of them, and then to reapply local alterations to the new files. Please contact support@dyalog.com for further advice.
        </p><h4>Upgrading from an earlier version</h4><p>Newer versions of Dyalog APL will be placed in new subdirectories, rather than in the same location as the currently installed versions. This means that both old and new versions can be run in parallel, but extra disk space in /opt will be required to cater for the multiple releases. Note however that once a workspace has been saved in a later version of Dyalog APL, it is most likely that it will not be possible to <tt>)LOAD</tt> or <tt>)COPY</tt> the workspace by an earlier version. Once happy with the new version, then de-install the earlier version.</p></body>
</html>